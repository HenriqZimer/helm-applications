# Example values for RomM using ExternalSecrets from Vault
# This example shows how to use ExternalSecrets instead of internal secret creation

# -- Number of RomM replicas to start. Should be left at 1.
replicaCount: 1

# -- Number of old ReplicaSets to retain for rollback history.
revisionHistoryLimit: 3

image:
  repository: docker.io/rommapp/romm
  tag: "4.5.0"
  pullPolicy: IfNotPresent

# -- Resources requests and limits for RomM container.
resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    cpu: 1000m
    memory: 2Gi

# -- Service configuration
service:
  type: ClusterIP
  port: 8080

# -- Ingress configuration.
ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "512m"
  hosts:
    - host: romm.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: romm-tls
      hosts:
        - romm.example.com

# -- Persistence configuration - use existing PVCs
persistence:
  library:
    enabled: true
    type: pvc
    existingClaim: "romm-library-pvc"
  config:
    enabled: true
    type: pvc
    existingClaim: "romm-config-pvc"
  resources:
    enabled: true
    type: pvc
    existingClaim: "romm-resources-pvc"
  assets:
    enabled: true
    type: pvc
    existingClaim: "romm-assets-pvc"

# -- MariaDB database configuration
mariadb:
  enabled: true
  persistence:
    enabled: true
    type: pvc
    existingClaim: "romm-db-pvc"

# -- Secrets configuration for ExternalSecrets
secrets:
  # -- DISABLE internal secret creation when using ExternalSecrets
  enabled: false
  # -- Secret names (will be created by ExternalSecret controller)
  name: romm-credentials
  data: {}

# -- RomM application configuration
romm:
  # -- Additional environment variables
  env:
    - name: TZ
      value: "America/Sao_Paulo"
  
  # -- Load secrets from ExternalSecrets
  # The ExternalSecrets must be created separately and will generate these secret names
  envFrom:
    # App credentials (ROMM_AUTH_SECRET_KEY, API keys)
    - secretRef:
        name: romm-credentials
    # Database credentials (DB_*, MYSQL_*)
    - secretRef:
        name: romm-database-credentials

# -- RomM Configuration File (config.yml)
rommConfig:
  enabled: false
  name: romm-config-file
  config: |
    # Your config.yml content here